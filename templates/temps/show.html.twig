{% extends 'base.html.twig' %}
{% block title 'GroupeTemps' %}
{% block body %}
    <div class="container">
        {% include '/arrow/arrowTemps.html.twig' %}
    </div>
    <div class="tableauTemps">
        <div class="message d-flex justify-content-center">
            {% for message in app.flashes('success') %}
                <div class="col-md-6 p-a-1 text-center">
                    <div class="alert alert-success m-t-1 text-xs-center mt-3" role="alert">
                        <i class="fa fa-check fa-fw fa-lg"></i>{{ message }}
                    </div>
                </div>
            {% endfor %}
        </div>
        <table id="example" class="table table-striped table-bordered mt-5 text-center"  style="width:100%">
            <thead>
            <tr>
                <th style="width: 5%">Groupe\Temps</th>
                {% for temps in tempss %}
                    <th style=text-align:center;width:5%;">{{ temps.tempsPrelevement }}
                        <form method="post" action="{{ path ('temps.delete', {'id':temps.id}) }}">
                            <input type="hidden" name="_method" value="DELETE">
                            {#                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ temps.id) }}">#}
                            <a href="{{ path ('temps.delete', {'id':temps.id}) }}"><button type="button" data-func="dt-add" class="btn btn-success btn-xs dt-add ml-5">
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"></span></button>
                            </a>
                        </form>
                    </th>
                {% endfor %}
                {#                <th style="text-align:center;width:10%;">Ajouter temps <button type="button" data-func="dt-add" class="btn btn-success btn-xs dt-add">#}
                {#                        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>#}
                {#                    </button></th>#}
            </tr>
            </thead>
            <tbody>
            <tr>
                {#                <td rowspan="6"><input type="checkbox" class="form-check-input" id="exampleCheck1">#}
                {#                    <label class="form-check-label" for="exampleCheck1"></label>#}
                {#                </td>#}
                {% for groupe in produit.groupes %}
                <td><a href="{{ path('temps.index', {id: etude.id, slug: etude.slug}) }}">{{ groupe.idAnimalPorsolt }}</a></td>
                {% for temps in tempss %}
                    <td><input type="checkbox" class="form-check-input" id="exampleCheck1">
                        <label class="form-check-label" for="exampleCheck1"></label>
                    </td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="container d-flex mt-5 text-center" >
    <div class="row d-md-">
    <div class="column text-center">
        <div class="portlet">
            <div class="portlet-header ">Ajouter un temps</div>
            <div class="portlet-content">{{ include ('prelevement/_form.html.twig', {button:'cr√©er'}) }}</div>
        </div>
    </div>
    <div class="col md-8">
        <button class="btn btn-light mr-1">Tout</button>
        <button class="btn btn-light mr-1">Aucun</button>
        <a href="#" class="btn btn-primary mr-1">Suivant</a>
        {#                <a href="{{ path('prelevement.index') }}" class="btn btn-primary mr-1">Suivant</a>#}
    </div>

    <script>
        $(document).ready(function() {
            //Only needed for the filename of export files.
            //Normally set in the title tag of your page.
            document.title='Simple DataTable';
            // DataTable initialisation
            $('#example').DataTable(
                {
                    "dom": '<"dt-buttons"Bf><"clear">lirtp',
                    "paging": false,
                    "autoWidth": true,
                    "columnDefs": [
                        { "orderable": false, "targets": 5 }
                    ],
                    "buttons": [
                        'colvis',
                        'copyHtml5',
                        'csvHtml5',
                        'excelHtml5',
                        'pdfHtml5',
                        'print'
                    ]
                }
            );
            //Add row button
            $('.dt-add').each(function () {
                $(this).on('click', function(evt){
                    //Create some data and insert it
                    const rowData = [];
                    const table = $('#example').DataTable();
                    //Store next row number in array
                    const info = table.page.info();
                    rowData.push(info.recordsTotal+1);
                    //Some description
                    rowData.push('New Order');
                    //Random date
                    const date1 = new Date(2016, 01, 01);
                    const date2 = new Date(2018, 12, 31);
                    var rndDate = new Date(+date1 + Math.random() * (date2 - date1));//.toLocaleDateString();
                    rowData.push(rndDate.getFullYear()+'/'+(rndDate.getMonth()+1)+'/'+rndDate.getDate());
                    //Status column
                    rowData.push('NEW');
                    //Amount column
                    rowData.push(Math.floor(Math.random() * 2000) + 1);
                    //Inserting the buttons ???
                    rowData.push('<button type="button" class="btn btn-primary btn-xs dt-edit" style="margin-right:16px;"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button><button type="button" class="btn btn-danger btn-xs dt-delete"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>');
                    //Looping over columns is possible
                    //var colCount = table.columns()[0].length;
                    //for(var i=0; i < colCount; i++){			}

                    //INSERT THE ROW
                    table.row.add(rowData).draw( false );
                });
            });
            //Edit row buttons
            // $('.dt-edit').each(function () {
            //     $(this).on('click', function(evt){
            //         $this = $(this);
            //         var dtRow = $this.parents('tr');
            //         $('div.modal-body').innerHTML='';
            //         $('div.modal-body').append('Row index: '+dtRow[0].rowIndex+'<br/>');
            //         $('div.modal-body').append('Number of columns: '+dtRow[0].cells.length+'<br/>');
            //         for(var i=0; i < dtRow[0].cells.length; i++){
            //             $('div.modal-body').append('Cell (column, row) '+dtRow[0].cells[i]._DT_CellIndex.column+', '+dtRow[0].cells[i]._DT_CellIndex.row+' => innerHTML : '+dtRow[0].cells[i].innerHTML+'<br/>');
            //         }
            //         $('#myModal').modal('show');
            //     });
            // });
            //Delete buttons
            // $('.dt-delete').each(function () {
            //     $(this).on('click', function(evt){
            //         $this = $(this);
            //         var dtRow = $this.parents('tr');
            //         if(confirm("Are you sure to delete this row?")){
            //             var table = $('#example').DataTable();
            //             table.row(dtRow[0].rowIndex-1).remove().draw( false );
            //         }
            //     });
            // });
            $('#myModal').on('hidden.bs.modal', function (evt) {
                $('.modal .modal-body').empty();
            });
        });
    </script>
{% endblock %}